<!DOCTYPE html>
<html lang="sl">
<head>
  <meta charset="UTF-8" />
  <title>Veƒçna voda ‚Äì ≈æupnije Kapla, Rem≈°nik, O≈æbalt, Brezno</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Google fonti -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Cinzel:wght@400;600&display=swap" rel="stylesheet">

  <style>
    /* ==========================================
       NASTAVITVE ‚Äì TUKAJ LAHKO SPREMENJA≈† FONTE
       ========================================== */
    :root {
      /* Glavni serif font (naslovi, glava) */
  --font-serif: "Cormorant Garamond", serif;

      /* Glavni sans-serif font (besedilo) */
  --font-sans: "Lato", sans-serif;

      /* Velikosti fontov v glavi */
      --font-brand-size: 2rem;
      --font-menu-size: 0.85rem;
      --font-center-title: 1.1rem;
      --font-parish-size: 1.05rem;

      /* Osnovne barve */
      --gold: #bf921c;
      --gold-soft: #f3e2b5;
      --bg: #f7f2e4;
      --bg-alt: #ffffff;
      --primary: #263143;
      --primary-soft: #e5ecf5;
      --text: #222222;
      --muted: #7a7f88;
      --muted-light: #a0a4af;
      --border: #ded3b6;
      --border-strong: #b29554;
      --footer-bg: #1f222a;
      --footer-border: #343845;
      --radius-lg: 18px;
      --radius-md: 12px;
      --radius-sm: 8px;
      --shadow-soft: 0 14px 35px rgba(0, 0, 0, 0.06);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: var(--font-sans);
      background: #f5f2ea;
      color: var(--text);
      line-height: 1.6;
    }

    a {
      color: var(--gold);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    /* ================== GLAVA ================== */
    /* 1) ZLATA ‚Äì brand + meni ƒçez celo ≈°irino */
    header {
      background: var(--gold);
      color: #ffffff;
    }

    .top-bar {
      /* BREZ ozadja ‚Äì to je zdaj na headerju */
      background: transparent;
      padding: 1rem 1.2rem 0.7rem;
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      font-family: var(--font-serif);
    }

    .top-brand {
      font-size: var(--font-brand-size);
      letter-spacing: 0.3em;
      text-transform: uppercase;
      white-space: nowrap;
    }

    .top-nav {
      display: flex;
      gap: 1.2rem;
      font-size: var(--font-menu-size);
      letter-spacing: 0.16em;
      text-transform: uppercase;
    }

    .top-nav a {
      color: #ffffff;
    }

/* 2) BELI trak z napisom (dvojne ƒçrte) */
.mid-bar {
  background: #ffffff;
  color: var(--gold);
  padding: 1.2rem 0 1.2rem;
  text-align: center;
  font-family: var(--font-serif);
  font-size: var(--font-center-title);
  letter-spacing: 0.28em;
  text-transform: uppercase;

  /* BELA sekcija ‚Äì ne≈æni dekorativni robovi */
  border-top: 3px solid #f9f3e3;
  border-bottom: 3px solid #f9f3e3;
}

/* 3) ZLATI trak ‚Äì grbi + dvojne ƒçrte */
.hero-icons {
  background: var(--gold);
  padding: 1.8rem 0 1.6rem;
  text-align: center;

  /* ZLATA sekcija ‚Äì dvojna bela linija */
  border-top: 4px double #f9f3e3;
  border-bottom: 4px double #f9f3e3;
}

.hero-icons-image {
  max-width: 780px;
  width: 100%;
  height: auto;
  display: block;
  margin: 0 auto;
}

/* Imena ≈æupnij ‚Äì veƒçja, bold, veƒç razmika */
.hero-parish-names {
  margin-top: 1.4rem;
  font-family: var(--font-serif);
  font-size: 1.35rem;
  letter-spacing: 0.33em;
  color: #ffffff;
  text-transform: uppercase;

  display: flex;
  justify-content: center;
  gap: 4.5rem; /* veƒç razmika med imeni */
  flex-wrap: wrap;
  font-weight: 600; /* bold */
}

.hero-parish-names span {
  white-space: nowrap;
}


    /* ========= FB LINK NA ZAƒåETKU ========= */
    .fb-top-link-wrap {
      background: transparent;
    }

    .fb-top-link {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0.9rem 1.2rem 0.4rem;
    }

    .fb-top-card {
      display: flex;
      align-items: center;
      gap: 0.9rem;
      background: #ffffff;
      border-radius: 999px;
      border: 1px solid var(--border);
      box-shadow: 0 10px 26px rgba(0, 0, 0, 0.08);
      padding: 0.55rem 1.3rem;
      font-size: 0.9rem;
    }

    .fb-top-card:hover {
      text-decoration: none;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
    }

    .fb-top-icon {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      background: #1877f2;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: #fff;
      font-size: 20px;
      flex-shrink: 0;
    }

    .fb-top-text {
      color: var(--primary);
      font-size: 0.95rem;
    }

    .fb-top-text span {
      font-weight: 600;
    }

    @media (max-width: 620px) {
      .fb-top-link {
        padding-inline: 1rem;
      }
    }

    /* ============ GLAVNA VSEBINA ============ */
    main {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0.4rem 1.2rem 2.8rem;
      display: flex;
      flex-direction: column;
      gap: 1.3rem;
    }

    .section {
      background: var(--bg-alt);
      border-radius: var(--radius-lg);
      padding: 1.1rem 1.2rem 1.3rem;
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--border);
    }

    .section h2 {
      font-size: 1rem;
      margin-bottom: 0.45rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--primary);
      font-weight: 600;
    }

    .section h2 span {
      font-size: 0.8rem;
      font-weight: 400;
      color: var(--muted);
      text-transform: none;
      letter-spacing: 0;
      margin-left: 0.3rem;
    }

    .section p.section-intro {
      font-size: 0.88rem;
      color: var(--muted);
      margin-bottom: 0.7rem;
    }

    /* POSEBEN BANNER */
    #special-banner {
      display: none;
      margin-bottom: 0.8rem;
      border-radius: 14px;
      padding: 0.7rem 0.9rem;
      background: #fff7e5;
      border: 1px solid var(--border-strong);
      box-shadow: 0 10px 24px rgba(0,0,0,0.06);
      font-size: 0.9rem;
      color: var(--primary);
    }

    #special-banner strong {
      text-transform: uppercase;
      letter-spacing: 0.16em;
      font-size: 0.8rem;
      display: block;
      margin-bottom: 0.1rem;
    }

    #special-banner a {
      font-weight: 600;
    }

    /* MA≈†E */
    .mase-meta {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 0.5rem;
      font-size: 0.78rem;
      color: var(--muted);
      margin-bottom: 0.6rem;
    }

    .mase-meta strong {
      color: var(--primary);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      margin-bottom: 0.7rem;
      overflow: hidden;
      border-radius: var(--radius-md);
    }

    thead {
      background: var(--primary-soft);
    }

    th,
    td {
      padding: 0.42rem 0.6rem;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    th {
      font-weight: 600;
      font-size: 0.74rem;
      text-transform: uppercase;
      letter-spacing: 0.13em;
      color: var(--primary);
      white-space: nowrap;
    }

    tbody tr:nth-child(even) {
      background: #fdf7ea;
    }

    tbody tr:last-child td {
      border-bottom: none;
    }

    .group-row td {
      background: #f0eee8;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--primary);
      font-size: 0.75rem;
      border-bottom: 1px solid var(--border-strong);
    }

    .group-row.sunday td {
      background: var(--gold-soft);
      color: var(--primary);
      border-top: 2px solid var(--border-strong);
      border-bottom: 1px solid var(--border-strong);
    }

    .note {
      font-size: 0.8rem;
      color: var(--muted);
    }

    .weekly-notices {
      margin-top: 0.6rem;
      border-top: 1px dashed var(--border);
      padding-top: 0.6rem;
    }

    .weekly-notices h3 {
      font-size: 0.86rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      margin-bottom: 0.3rem;
      color: var(--primary);
    }

    .weekly-notices ul {
      margin-left: 1rem;
      font-size: 0.88rem;
      color: var(--text);
    }

    .weekly-notices li {
      margin-bottom: 0.22rem;
    }

    /* OBVESTILA */
    .announcements-list {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      font-size: 0.9rem;
    }

    .announcement {
      padding: 0.7rem 0.8rem;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      background: #faf7ef;
    }

    .announcement-header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 0.4rem;
      font-size: 0.78rem;
      color: var(--muted);
      margin-bottom: 0.2rem;
    }

    .announcement-title {
      font-weight: 600;
      margin-bottom: 0.25rem;
      color: var(--primary);
    }

    .announcement-pdf {
      display: inline-block;
      margin-top: 0.25rem;
      font-size: 0.8rem;
      color: var(--gold);
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .announcement-pdf::before {
      content: "üìÑ ";
    }

    /* ≈ΩUPNIJE */
    .parishes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
      gap: 0.8rem;
      font-size: 0.9rem;
      margin-bottom: 0.7rem;
    }

    .parish-card {
      border-radius: var(--radius-md);
      overflow: hidden;
      border: 1px solid var(--border);
      background: #fdfaf2;
    }

    .parish-photo {
      height: 110px;
      overflow: hidden;
    }

    .parish-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .parish-body {
      padding: 0.6rem 0.7rem 0.7rem;
    }

    .parish-body strong {
      display: block;
      margin-bottom: 0.1rem;
    }

    /* KONTAKT + MAPA */
    .contact-card {
      padding: 0.8rem 0.9rem;
      border-radius: var(--radius-md);
      border: 1px dashed var(--border);
      background: #fff;
      font-size: 0.9rem;
      margin-bottom: 0.7rem;
    }

    .contact-card p {
      margin-bottom: 0.2rem;
    }

    .map-wrapper {
      margin-top: 0.6rem;
      border-radius: var(--radius-md);
      overflow: hidden;
      border: 1px solid var(--border);
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.08);
    }

    .map-inner {
      position: relative;
      padding-bottom: 40%;
      height: 0;
    }

    .map-inner iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }

    .map-note {
      font-size: 0.8rem;
      color: var(--muted);
      margin-top: 0.35rem;
    }

    /* NOGA */
    .site-footer {
      background: var(--footer-bg);
      color: #f3f4f8;
      border-top: 2px solid var(--footer-border);
      padding: 2.0rem 1.2rem 1.2rem;
    }

    .footer-inner {
      max-width: 1100px;
      margin: 0 auto;
    }

    .footer-top {
      display: flex;
      flex-wrap: wrap;
      gap: 1.8rem;
      align-items: flex-start;
      justify-content: space-between;
      margin-bottom: 1.3rem;
    }

    .footer-logo img {
      max-width: 150px;
      height: auto;
      display: block;
      margin-bottom: 0.4rem;
    }

    .footer-columns {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 1.6rem;
      flex: 1;
    }

    .footer-col-title {
      text-transform: uppercase;
      letter-spacing: 0.16em;
      font-size: 0.8rem;
      margin-bottom: 0.5rem;
      padding-bottom: 0.2rem;
      border-bottom: 1px solid var(--footer-border);
    }

    .footer-links {
      list-style: none;
      font-size: 0.84rem;
      color: var(--muted-light);
    }

    .footer-links li {
      margin-bottom: 0.25rem;
    }

    .footer-links a {
      color: #eaeaea;
    }

    .footer-links a:hover {
      text-decoration: underline;
    }

    .hozana-box {
      background: #ffffff;
      border-radius: var(--radius-md);
      padding: 0.7rem 0.8rem;
      border: 1px solid var(--border);
      box-shadow: 0 8px 20px rgba(0,0,0,0.18);
    }

    .hozana-box iframe {
      width: 100%;
      max-width: 320px;
      height: 170px;
      border-radius: var(--radius-sm);
      background: #ffffff;
    }

    .footer-bottom {
      border-top: 1px solid var(--footer-border);
      padding-top: 0.7rem;
      font-size: 0.78rem;
      color: var(--muted-light);
      text-align: center;
    }

    /* RESPONSIVE */
    @media (max-width: 800px) {
      .top-bar {
        flex-direction: column;
        align-items: flex-start;
      }
      .top-nav {
        gap: 0.6rem;
        flex-wrap: wrap;
      }
      .hero-parish-names {
        gap: 1.4rem;
      }
      .footer-columns {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 520px) {
      main {
        padding-inline: 1rem;
      }
      .footer-columns {
        grid-template-columns: 1fr;
      }
      .top-brand {
        font-size: 1.4rem;
        letter-spacing: 0.22em;
      }
    }
  </style>
</head>
<body>
  <!-- GLAVA: zlato ‚Äì belo ‚Äì zlato -->
  <header>
    <div class="top-bar">
      <div class="top-brand">VEƒåNA VODA</div>
      <nav class="top-nav">
        <a href="#mase">Ma≈°e</a>
        <a href="#obvestila">Oznanila</a>
        <a href="#zupnije">≈Ωupnije</a>
        <a href="#kontakt">Kontakt</a>
      </nav>
    </div>

    <div class="mid-bar">
      Spletni portal ≈æupnij
    </div>

    <div class="hero-icons">
      <div class="hero-icons-inner">
        <img src="slike/Grbi.png" class="hero-icons-image" alt="Veƒçna voda ‚Äì ≈æupnije" />
        <div class="hero-parish-names">
          <span>Kapla</span>
          <span>Rem≈°nik</span>
          <span>O≈æbalt</span>
          <span>Brezno</span>
        </div>
      </div>
    </div>
  </header>

  <!-- FB LINK NA ZAƒåETKU STRANI -->
  <div class="fb-top-link-wrap">
    <div class="fb-top-link">
      <a class="fb-top-card" href="https://www.facebook.com/vecnavoda" target="_blank" rel="noopener">
        <div class="fb-top-icon">f</div>
        <div class="fb-top-text">
          Obi≈°ƒçi na≈°o Facebook stran <span>Veƒçna voda</span>
        </div>
      </a>
    </div>
  </div>

  <main>
    <!-- POSEBNI BANNER -->
    <div id="special-banner">
      <div id="special-banner-text">
        <strong>Posebno obvestilo</strong>
        <span id="special-banner-message"></span>
      </div>
    </div>

    <!-- 1) MA≈†E -->
    <section class="section" id="mase">
      <h2>Svete ma≈°e <span>(nedelja ‚Äì teden ‚Äì nedelja)</span></h2>
      <p class="section-intro">
        Podatke vna≈°a≈° v datoteki <code>mase.js</code> ‚Äì najprej nedeljske ma≈°e (vse ≈æupnije),
        nato ma≈°e med tednom in na koncu ma≈°e naslednje nedelje. Spodaj so ≈°e oznanila te nedelje.
      </p>

      <div class="mase-meta">
        <div><strong>Obdobje:</strong> <span id="mase-period"></span></div>
        <div>Struktura: <code>sundayStart</code>, <code>weekdays</code>, <code>sundayEnd</code>, <code>notices</code>.</div>
      </div>

      <table>
        <thead>
          <tr>
            <th>Datum</th>
            <th>≈Ωupnija / dan</th>
            <th>Ura</th>
            <th>Namen / opomba</th>
          </tr>
        </thead>
        <tbody id="mase-body">
          <!-- napolni JS -->
        </tbody>
      </table>

      <div class="weekly-notices" id="weekly-notices">
        <!-- napolni JS iz MASE.notices -->
      </div>
    </section>

    <!-- 2) OBVESTILA -->
    <section class="section" id="obvestila">
      <h2>Obvestila <span>(splo≈°na in dalj≈°e obdobje)</span></h2>
      <p class="section-intro">
        Obvestila so shranjena v datoteki <code>obvestila.js</code>. Za vsako lahko doda≈° tudi
        povezavo do PDF oznanil (polje <code>pdf</code>), ki se odpre v novem oknu.
      </p>

      <div class="announcements-list" id="obvestila-list">
        <!-- polni se iz obvestila.js -->
      </div>
    </section>

    <!-- 3) ≈ΩUPNIJE -->
    <section class="section" id="zupnije">
      <h2>Na≈°e ≈æupnije</h2>
      <p class="section-intro">
        Spodaj so kratki podatki o ≈æupnijah in lokalne fotografije (v mapi <code>slike</code>).
      </p>

      <div class="parishes-grid">
        <div class="parish-card">
          <div class="parish-photo">
            <img src="slike/kapla.png" alt="≈Ωupnija Kapla" />
          </div>
          <div class="parish-body">
            <strong>≈Ωupnija Kapla na Kozjaku</strong>
            Zavetnica: sv. Katarina Aleksandrijska
          </div>
        </div>
        <div class="parish-card">
          <div class="parish-photo">
            <img src="slike/remsnik.png" alt="≈Ωupnija Rem≈°nik" />
          </div>
          <div class="parish-body">
            <strong>≈Ωupnija Rem≈°nik</strong>
            Zavetnik: sv. Jurij
          </div>
        </div>
        <div class="parish-card">
          <div class="parish-photo">
            <img src="slike/ozbalt.png" alt="≈Ωupnija O≈æbalt" />
          </div>
          <div class="parish-body">
            <strong>≈Ωupnija O≈æbalt ob Dravi</strong>
            Zavetnik: sv. O≈æbalt
          </div>
        </div>
        <div class="parish-card">
          <div class="parish-photo">
            <img src="slike/brezno.png" alt="≈Ωupnija Brezno" />
          </div>
          <div class="parish-body">
            <strong>≈Ωupnija Brezno</strong>
            Zavetnica: Marija Vnebovzeta
          </div>
        </div>
      </div>
    </section>

    <!-- 4) KONTAKT + MAPA -->
    <section class="section" id="kontakt">
      <h2>Kontakt</h2>
      <p class="section-intro">
        Spodaj so kontaktni podatki ≈æupni≈°ƒça in zemljevid. Lokacijo lahko po potrebi zamenja≈°.
      </p>

      <div class="contact-card">
        <strong>≈Ωupni≈°ƒçe Veƒçna voda</strong>
        <p>≈Ωupnik: Ime in priimek</p>
        <p>Telefon: 000 000 000</p>
        <p>E-po≈°ta: <a href="mailto:info@vecna-voda.si">info@vecna-voda.si</a></p>
        <p>Naslov: Ulica 1, 0000 Kapla na Kozjaku</p>
      </div>

      <div class="map-wrapper">
        <div class="map-inner">
          <iframe
            src="https://www.google.com/maps?q=Kapla%20na%20Kozjaku&output=embed"
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
            allowfullscreen>
          </iframe>
        </div>
        <p class="map-note">
          Za prikaz vseh ≈æupnij naenkrat lahko uporabi≈° Google My Maps in tukaj
          prilepi≈° <code>&lt;iframe&gt;</code> kodo svoje karte z veƒç oznakami.
        </p>
      </div>
    </section>
  </main>

  <!-- NOGA -->
  <footer class="site-footer">
    <div class="footer-inner">
      <div class="footer-top">
        <div class="footer-logo">
          <img src="slike/Grb.png" alt="Veƒçna voda ‚Äì logotip" />
        </div>

        <div class="footer-columns">
          <div class="footer-col">
            <div class="footer-col-title">Meni</div>
            <ul class="footer-links">
              <li><a href="#mase">Ma≈°e</a></li>
              <li><a href="#obvestila">Oznanila</a></li>
              <li><a href="#zupnije">≈Ωupnije</a></li>
              <li><a href="#kontakt">Kontakt</a></li>
            </ul>
          </div>

          <div class="footer-col">
            <div class="footer-col-title">≈Ωupnije</div>
            <ul class="footer-links">
              <li>Kapla</li>
              <li>Rem≈°nik</li>
              <li>O≈æbalt</li>
              <li>Brezno</li>
            </ul>
          </div>

          <div class="footer-col">
            <div class="footer-col-title">Bo≈æja beseda</div>
            <div class="hozana-box">
              <iframe src="https://hozana.si/iframe.php"
                      allowtransparency="true"
                      scrolling="no">
              </iframe>
            </div>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        &copy; <span id="year"></span> Veƒçna voda ‚Äì ≈æupnije Kapla, Rem≈°nik, O≈æbalt, Brezno.
      </div>
    </div>
  </footer>

  <!-- Pi≈°kotki -->
  <div id="cookie-banner" style="display:none; position:fixed; left:0; right:0; bottom:0; padding:8px 12px; background:#f0f0f0; border-top:1px solid #ccc; font-size:13px; z-index:100;">
    <span>
      Ta spletna stran uporablja osnovne pi≈°kotke za delovanje in anonimno statistiko obiska.
      Z nadaljevanjem uporabe strani se strinjate z uporabo pi≈°kotkov.
    </span>
    <button id="cookie-ok" style="margin-left:12px; padding:2px 10px; font-size:12px;">
      Razumem
    </button>
  </div>

  <!-- PODATKOVNE DATOTEKE -->
  <script src="mase.js"></script>
  <script src="obvestila.js"></script>
  <script src="posebnaObvestila.js"></script>

  <script>
    function safeGetLocalStorage(key) {
      try {
        if (!("localStorage" in window)) return null;
        return window.localStorage.getItem(key);
      } catch (e) {
        return null;
      }
    }

    function safeSetLocalStorage(key, value) {
      try {
        if (!("localStorage" in window)) return;
        window.localStorage.setItem(key, value);
      } catch (e) {}
    }

    document.getElementById("year").textContent = new Date().getFullYear();

    // MA≈†E
    function renderMase() {
      if (!window.MASE) return;

      const data = window.MASE;
      const tbody = document.getElementById("mase-body");
      const periodEl = document.getElementById("mase-period");
      tbody.innerHTML = "";
      periodEl.textContent = data.period || "";

      function addGroupRow(title, isSunday) {
        const tr = document.createElement("tr");
        tr.className = "group-row" + (isSunday ? " sunday" : "");
        const td = document.createElement("td");
        td.colSpan = 4;
        td.textContent = title;
        tr.appendChild(td);
        tbody.appendChild(tr);
      }

      function addMassRow(date, label, mass) {
        const tr = document.createElement("tr");

        const tdDate = document.createElement("td");
        tdDate.textContent = date || "";

        const tdParish = document.createElement("td");
        tdParish.textContent = label || mass.parish || "";

        const tdTime = document.createElement("td");
        tdTime.textContent = mass.time || "";

        const tdNote = document.createElement("td");
        tdNote.textContent = mass.note || "";

        tr.appendChild(tdDate);
        tr.appendChild(tdParish);
        tr.appendChild(tdTime);
        tr.appendChild(tdNote);
        tbody.appendChild(tr);
      }

      // Nedelja na zaƒçetku
      if (data.sundayStart && data.sundayStart.masses) {
        const s = data.sundayStart;
        addGroupRow(`Nedelja ${s.date} ‚Äì ${s.label || ""}`, true);
        s.masses.forEach(m => addMassRow(s.date, m.parish, m));
      }

      // Ma≈°e med tednom
      (data.weekdays || []).forEach(d => {
        if (!d.masses || !d.masses.length) return;
        const title = `${d.day || ""} ${d.date || ""}${d.saint ? " ‚Äì " + d.saint : ""}`;
        addGroupRow(title, false);
        d.masses.forEach(m => addMassRow(d.date, m.parish, m));
      });

      // Nedelja na koncu
      if (data.sundayEnd && data.sundayEnd.masses) {
        const s = data.sundayEnd;
        addGroupRow(`Nedelja ${s.date} ‚Äì ${s.label || ""}`, true);
        s.masses.forEach(m => addMassRow(s.date, m.parish, m));
      }

      // Oznanila te nedelje
      const cont = document.getElementById("weekly-notices");
      cont.innerHTML = "";
      const notes = data.notices || [];
      if (!notes.length) {
        cont.innerHTML = "<p class='note'>Za to nedeljo ni posebnih oznanil.</p>";
      } else {
        const h = document.createElement("h3");
        h.textContent = "Oznanila te nedelje";
        const ul = document.createElement("ul");
        notes.forEach(txt => {
          const li = document.createElement("li");
          li.textContent = txt;
          ul.appendChild(li);
        });
        cont.appendChild(h);
        cont.appendChild(ul);
      }
    }

    // OBVESTILA
    function renderObvestila() {
      if (!window.OBVESTILA) return;
      const list = document.getElementById("obvestila-list");
      list.innerHTML = "";

      window.OBVESTILA.forEach(obv => {
        const article = document.createElement("article");
        article.className = "announcement";

        const header = document.createElement("div");
        header.className = "announcement-header";

        const spanLeft = document.createElement("span");
        spanLeft.textContent = obv.tag || "";

        const spanRight = document.createElement("span");
        spanRight.textContent = obv.date || "";

        header.appendChild(spanLeft);
        header.appendChild(spanRight);

        const title = document.createElement("div");
        title.className = "announcement-title";
        title.textContent = obv.title || "";

        const p = document.createElement("p");
        p.textContent = obv.text || "";

        article.appendChild(header);
        article.appendChild(title);
        article.appendChild(p);

        if (obv.pdf) {
          const link = document.createElement("a");
          link.className = "announcement-pdf";
          link.href = obv.pdf;
          link.target = "_blank";
          link.rel = "noopener";
          link.textContent = "Odpri oznanila (PDF)";
          article.appendChild(link);
        }

        list.appendChild(article);
      });
    }

    // PI≈†KOTKI
    function initSimpleCookieBanner() {
      var banner = document.getElementById("cookie-banner");
      var btn = document.getElementById("cookie-ok");
      var KEY = "vv-cookie-info";

      if (!banner || !btn) return;

      if (safeGetLocalStorage(KEY) === "ok") {
        banner.style.display = "none";
        return;
      }

      banner.style.display = "block";

      btn.addEventListener("click", function () {
        safeSetLocalStorage(KEY, "ok");
        banner.style.display = "none";
      });
    }

    // POSEBNO OBVESTILO
    function initSpecialBanner() {
      const data = window.SPECIAL_NOTICE;
      const el = document.getElementById("special-banner");
      const msgEl = document.getElementById("special-banner-message");

      if (!el || !msgEl || !data || !data.text) return;

      let text = data.text || "";
      if (data.linkHref && data.linkText) {
        text += " ";
        text += '<a href="' + data.linkHref +
                '" target="_blank" rel="noopener">' +
                data.linkText + "</a>";
      }

      msgEl.innerHTML = text;
      el.style.display = "block";
    }

    document.addEventListener("DOMContentLoaded", function () {
      renderMase();
      renderObvestila();
      initSimpleCookieBanner();
      initSpecialBanner();
    });
  </script>
</body>
</html>
